{% extends 'dashboardExtender.html' %}

{% block sidebar %}
<div class="scrollbar-sidebar">
    <div class="app-sidebar__inner">
        <ul class="vertical-nav-menu">
            <li class="app-sidebar__heading">Dashboard</li>
            <li>
                <a href="{{ url_for('home') }}" >
                    <i class="metismenu-icon fa fa-home"></i>
                    Home
                </a>
            </li>


            <li>
                <a href="{{ url_for('docappointments') }}" class="mm-active">
                    <i class="metismenu-icon fa fa-user"></i>
                    Appointments
                </a>
            </li>

        </ul>
    </div>
</div>
{% endblock %}

{% block body %}
<div class="app-main__inner">
    <div class="app-page-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">
                <div class="page-title-icon">
                    <i class="fa fa-table icon-gradient bg-amy-crisp"> </i>
                </div>
                <div>Appointments
                    <div class="page-title-subheading">View the list of Appointments booked by patients.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="tab-content">
        <div class="tab-pane tabs-animation fade show active" id="tab-content-0" role="tabpanel">
            <div class="row">
                <div class="col-lg-8">
                    
            <div class="main-card mb-3 card">
                        <div class="card-body"><h5 class="card-title">Appointments</h5>
                                                
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab-eg11-0" role="tabpanel">
                                    <table class="mb-0 table table-striped">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Patient Address</th>
                                            <th>Patient Name</th>
                                            <th>Appointment Time</th>
                                            <th>Status</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for i in l %}
                                        <tr>
                                            <th scope="row">{{ loop.index }}</th>
                                            <td>{{ arr[loop.index-1][1] }}</td>
                                            <td>{{ arr[loop.index-1][0] }}</td>
                                            <td>{{ i[3] }}</td>
                                            {% if i[4]==0 %}
                                            <td>
                                                <form action="{{ url_for('accept_appointment') }}" method="post">
                                                    <button class="mb-2 mr-2 btn btn-success" type="submit" name="action" value="{{ i[0] }}">Accept</button>
                                                </form>
                                                <form action="{{ url_for('reject_appointment') }}" method="post">
                                                    <button class="mb-2 mr-2 btn btn-dark" type="submit" name="action" value="{{ i[0] }}">Reject</button>
                                                </form>
                                            </td>
                                            {% elif i[4]==1 %}
                                            <td><button class="mb-2 mr-2 btn btn-success" type="submit">Accepted</button></td>
                                            {% elif i[4]==2 %}
                                            <td><button class="mb-2 mr-2 btn btn-danger" type="submit">Rejected</button></td>
                                            {% endif %} 
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                                    
                            </div>
                        </div>
            </div>
            </div>
            </div>
        </div>                
    </div> 

</div>
{% endblock %}